{% extends "base/iframeBase.html" %}

{% block content %}
    <div class="wrapper wrapper-content animated fadeInRight">
        <div class="row">
            <div class="col-sm-12">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
						<h4>主机列表（共{{listHostNum}}条记录）：</h4>
                        <div class="ibox-tools">
                        </div>
                    </div>
                    <div class="ibox-content">
                        <div class="row">
<!--                             <a type="button" id="add-work-order" href="javascript:void(0);" onclick="addWorkOrder()" class="btn btn-primary">新建工单</a> -->
                            <div class="col-sm-3">
                            	<form id="hostSearchForm" method="get" class="form-horizontal" role="form">
                            	{% csrf_token %}							                           
	                                <div class="input-group">
	                                	{% if search_keyword == '' %}
	                                    <input type="text" placeholder="请输入关键词(主机名或IP地址)" class="input-sm form-control" id="search_keyword" name="search_keyword" value="">
	                                    {% else %}
	                                    <input type="text" placeholder="请输入关键词(主机名或IP地址)" class="input-sm form-control" id="search_keyword" name="search_keyword" value="{{search_keyword}}">
	                                    {% endif %}
	                                    <span class="input-group-btn">
	                                    	<button type="submit" class="btn btn-sm btn-primary">搜索</button>
	                                    </span>
	                                </div>
                                </form>
                            </div>                         
                            <div class="col-sm-offset-8 col-sm-1">
 								<a type="button" id="add-host" href="javascript:void(0);" onclick="addHost()" class="btn btn-primary" style="width:100%;">添加主机</a>
                            </div>                            
                        </div>
                        <table class="table table-striped table-bordered table-hover dataTables-example" id="editable">
                            <thead>
                                <tr>
                                    <th>服务器ID</th>
                                    <th>业务线名称</th>
                                    <th>服务器环境</th>
                                    <th>主机名</th>
                                    <th>内网IP地址</th>
                                    <th>公网IP地址</th>
                                    <th>SSH端口号</th>
                                    <th>服务器类型</th>
                                    <th>服务器角色</th>
                                    <th>记录创建时间</th>
                                    <th>记录最后更新时间</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                            	{% for host in listHost %}
	                                <tr class="gradeX">
	                                    <td>{{host.id}}</td>
	                                    <td>{{host.businessName}}</td>
	                                    <td>{{host.serviceEnv}}</td>
	                                    <td class="center">{{host.hostName}}</td>
	                                    <td>{{host.intranetIpAddr}}</td>
	                                    <td>{{host.publicIpAddr}}</td>
	                                    <td>{{host.sshPort}}</td>
	                                    <td>{{host.hostType}}</td>
	                                    <td>{{host.hostRole}}</td>
	                                    <td class="center">{{host.createdTime|date:"Y-m-d H:i:s"}}</td>
	                                    <td class="center">{{host.updatedTime|date:"Y-m-d H:i:s"}}</td>
	                                    <td>
	                                    	<a type="button" href="javascript:void(0);" onclick="getHostDetail({{host.id}})" class="show-host-detail">详情</a>|
<!-- 	                                    	<a type="button" href="javascript:void(0);" onclick="addHostUser({{host.id}})" class="add-host-user">添加用户</a>| -->
	                                    	<a type="button" href="javascript:void(0);" onclick="changeHostInfo({{host.id}})" class="change-host">修改</a>|
											<a type="button" href="javascript:void(0);" onclick="delHost({{host.id}})" class="del-host">删除</a>
										</td>
	                                </tr>                            	
                            	{% empty %}
									<tr>
										<td>暂无工单，嘿嘿嘿.</td>
										<td></td>
										<td></td>
										<td></td>
										<td></td>
										<td></td>
										<td></td>
										<td></td>
										<td></td>
										<td></td>
										<td></td>
										<td></td>
									</tr>
                            	{% endfor %}
                            </tbody>
                        </table>
						<div style="text-align:center;">
							<nav aria-label="Page navigation">
							  <ul class="pagination">
							    <li>
							    	<a href="/cmdb/getHostList/?pageNo={{pageNo|add:'-1'}}&search_keyword={{search_keyword}}" aria-label="Previous">
							    	<span aria-hidden="true">&laquo;</span>
							    	</a>
							    </li>
							    <li class="active">
							    	<a href="/cmdb/getHostList/?pageNo={{pageNo|add:'0'}}&search_keyword={{search_keyword}}">{{pageNo|add:"1"}}</a>
							    </li>
							    
							    {% if listSqlOrderNum >= PAGE_LIMIT %}
							    <li>
							    	<a href="/cmdb/getHostList/?pageNo={{pageNo|add:'1'}}&search_keyword={{search_keyword}}">{{pageNo|add:"2"}}</a>
							    </li>
							    <li>
									<a href="/cmdb/getHostList/?pageNo={{pageNo|add:'2'}}&search_keyword={{search_keyword}}">{{pageNo|add:"3"}}</a>
								</li>
							    <li>
							    	<a href="/cmdb/getHostList/?pageNo={{pageNo|add:'3'}}&search_keyword={{search_keyword}}">{{pageNo|add:"4"}}</a>
							    </li>
							    <li>
							    	<a href="/cmdb/getHostList/?pageNo={{pageNo|add:'4'}}&search_keyword={{search_keyword}}">{{pageNo|add:"5"}}</a>
							    </li>
					    
							    <li>
							    	<a href="/cmdb/getHostList/?pageNo={{pageNo|add:'1'}}&search_keyword={{search_keyword}}" aria-label="Next">
							    		<span aria-hidden="true">&raquo;</span>
							    	</a>
							    </li>
							    {% endif %}									   
							  </ul>
							</nav>						
						</div>
                    </div>		
                </div>
            </div>
        </div>
    </div>
{% endblock content%}
